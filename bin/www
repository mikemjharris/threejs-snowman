#!/usr/bin/env node
var debug = require('debug')('game');
var app = require('../app');

app.set('port', process.env.PORT || 8000);

var server = app.listen(app.get('port'), function() {
  console.log('Express server listening on port ' + server.address().port);
});

var scores = [[270723, "Tobias"], [252039, "My Round"],[ 237322, "Tobias"], [217459, "Mike"], [210529, "Tobias"]];

var io = require('socket.io').listen(server);

io.sockets.on('connection', function(socket) {

  socket.emit('connected', scores);

  socket.on('single-score', function ( score ) {
    scores.push(score);
    socket.emit('topscores' , scores);
  })
});
